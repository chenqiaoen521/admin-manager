(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c0c"],{"/gXl":function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return o});var a=n("t3Un");function r(){return Object(a.a)({url:"/upmsManage/department/selectAll",method:"get"})}function i(t){return Object(a.a)({url:"/upmsManage/department/create",method:"post",data:t})}function d(t){return Object(a.a)({url:"/upmsManage/department/update",method:"put",data:t})}function o(t){return Object(a.a)({url:"/upmsManage/department/delete",method:"delete",data:t})}},"8+Se":function(t,e,n){},FT13:function(t,e,n){"use strict";n.r(e);var a=n("P2sY"),r=n.n(a),i=n("FyfS"),d=n.n(i),o=n("/gXl"),l={data:function(){return{temp:{},title:"添加子部门",status:0,dept:"",dialogFormVisible:!1,code:"",data:[],defaultProps:{children:"children",label:"departmentName"},rules:{departmentName:[{required:!0,message:"必填",trigger:"blur"}],departmentCode:[{required:!0,message:"必填",trigger:"blur"}]}}},created:function(){this.getTree()},methods:{handleCreate:function(){var t=this;this.dept&&this.code&&o.a({parentId:0,departmentName:this.dept,departmentCode:this.code,child:0}).then(function(e){t.dept="",t.code="",t.getTree()})},createData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&o.a({parentId:t.temp.parentId,departmentName:t.temp.departmentName,departmentCode:t.temp.departmentCode,child:0}).then(function(e){t.dialogFormVisible=!1,t.temp={},t.getTree()})})},getTree:function(){var t=this;o.d().then(function(e){e.data.data.row&&(t.data=t.treeNodeData(e.data.data.row))})},treeNodeData:function(t){var e=[],n=[],a=!0,r=!1,i=void 0;try{for(var o,l=d()(t);!(a=(o=l.next()).done);a=!0){var s=o.value;0===s.parentId?e.push(s):n.push(s)}}catch(t){r=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}return this.findChild(e,n,!1,!1),e},findChild:function(t,e,n,a){var r=!0,i=!1,o=void 0;try{for(var l,s=d()(t);!(r=(l=s.next()).done);r=!0){var c=l.value;c.children=[];var p=!0,u=!1,m=void 0;try{for(var f,h=d()(e);!(p=(f=h.next()).done);p=!0){var v=f.value;c.departmentId===v.parentId&&c.children.push(v)}}catch(t){u=!0,m=t}finally{try{!p&&h.return&&h.return()}finally{if(u)throw m}}n&&(a?c.isMulit=!1:c.disabled=n),this.findChild(c.children,e,n)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}},edit:function(t){this.title="编辑子部门",this.status=1,this.temp=r()({},t),this.dialogFormVisible=!0},editData:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&o.c({parentId:t.temp.parentId,departmentName:t.temp.departmentName,departmentCode:t.temp.departmentCode,departmentId:t.temp.departmentId,child:0}).then(function(e){t.dialogFormVisible=!1,t.temp={},t.getTree()})})},append:function(t){this.title="添加子部门",this.status=0,this.temp.parentId=t.departmentId,this.dialogFormVisible=!0},remove:function(t,e){var n=this;this.$confirm("是否要删除，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.childNodes&&t.childNodes.length>0?n.$alert("该部门不是一个子节点","警告",{type:"error"}):o.b({ids:e.departmentId}).then(function(t){t.data.success&&(n.$notify({title:"成功",message:"删除成功",type:"success"}),n.getTree())})}).catch(function(){n.$message({type:"info",message:"已取消删除"})})},renderContent:function(t,e){var n=this,a=e.node,r=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("div",[t("svg-icon",{attrs:{iconClass:a.isLeaf?"file":"folder"}}),t("span",{style:{marginLeft:"3px"}},[a.label+"_"+r.departmentCode])]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return n.append(r)}}},["添加子部门"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return n.remove(a,r)}}},["删除部门"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return n.edit(r)}}},["编辑"])])])}}},s=(n("iPfu"),n("KHd+")),c=Object(s.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"添加一级部门"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.dept,callback:function(e){t.dept=e},expression:"dept"}}),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"添加一级部门编号"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t._v(" "),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v(t._s(t.$t("table.add")))])],1),t._v(" "),n("div",{staticClass:"custom-tree-container"},[n("el-tree",{attrs:{data:t.data,"node-key":"departmentId","default-expand-all":"",props:t.defaultProps,"expand-on-click-node":!1,"render-content":t.renderContent}})],1),t._v(" "),n("el-dialog",{attrs:{width:"536px",visible:t.dialogFormVisible,title:t.title},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[n("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-position":"left","label-width":"90px"}},[n("el-form-item",{attrs:{label:"本门名称",prop:"departmentName"}},[n("el-input",{model:{value:t.temp.departmentName,callback:function(e){t.$set(t.temp,"departmentName",e)},expression:"temp.departmentName"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"本门编号",prop:"departmentCode"}},[n("el-input",{model:{value:t.temp.departmentCode,callback:function(e){t.$set(t.temp,"departmentCode",e)},expression:"temp.departmentCode"}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[0===t.status?n("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v(t._s(t.$t("table.confirm")))]):n("el-button",{attrs:{type:"primary"},on:{click:t.editData}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,null,null);c.options.__file="list.vue";e.default=c.exports},iPfu:function(t,e,n){"use strict";var a=n("8+Se");n.n(a).a}}]);